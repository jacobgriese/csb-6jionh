(this.webpackJsonpmasfpasaoea=this.webpackJsonpmasfpasaoea||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(84),c=n(8),i=(n(83),n(170)),o=n(171),s=n(172),p=n(173),l=n(18),j=n.n(l),d="Nom",u="Categorie",h="Sous Categorie",b="Longitude",O="Latitude",g="Courte desc",f="Page Description",m=n(87),x=n.n(m),v=new j.a.icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/375/375349.png",iconSize:[25,41],iconAnchor:[10,41],popupAnchor:[2,-40]}),S=j.a.Icon.extend({options:{iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-45]}});var D=function(e){var t,n={};for(var r in e)for(var a in n[r]={},e[r])n[r][a]=(t=e[r][a],new S({iconUrl:t}));return n}({"D\xe9collage":{"Spot Parapente":"images/markers/TO_Para.png","Spot Delta":"images/markers/TO_Delta.png","Spot Speed Riding":"images/markers/TO_Speed.png","Spot Parapente / Delta":"images/markers/TO_ParaDelta.png","Spot Parapente / Speed Riding":"images/markers/TO_ParaSpeed.png","Spot Parapente / Delta / Speed Riding":"images/markers/TO_ParaDeltaSpeed.png"},Atterrissage:{"Spot Parapente":"images/markers/LD_Para.png","Spot Delta":"images/markers/LD_Delta.png","Spot Speed Riding":"images/markers/LD_Speed.png","Spot Parapente / Delta":"images/markers/LD_ParaDelta.png","Spot Parapente / Speed Riding":"images/markers/LD_ParaSpeed.png","Spot Parapente / Delta / Speed Riding":"images/markers/LD_ParaDeltaSpeed.png"}});var k=n(2),P=Object(r.createContext)({map:null});function y(e){var t=e.children,n=Object(r.useState)(null),a=Object(c.a)(n,2),i=a[0],o=a[1];return Object(k.jsx)(P.Provider,{value:{map:i,setMap:o},children:t})}var w=n(169);function C(){var e=Object(w.a)(),t=Object(r.useContext)(P).setMap;return Object(r.useEffect)((function(){t(e)}),[e,t]),null}var L={map:{}};function _(e){var t=e.data;return Object(k.jsx)("div",{id:"Map",style:L.map,children:Object(k.jsxs)(i.a,{style:{height:"calc(100vh - 80px)",width:"100wh"},center:[46.71330851649129,2.4389827471556],zoom:6,minZoom:4,maxZoom:18,scrollWheelZoom:!0,children:[Object(k.jsx)(o.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors - Mapingo Alpha v0.01',url:"https://tile.osm.ch/switzerland/{z}/{x}/{y}.png"}),Object(k.jsx)(x.a,{chunkedLoading:!0,children:t.map((function(t){return Object(k.jsx)(s.a,{position:[t[O],t[b]],icon:(n=t[h],r=t[u],n in D&&r in D[n]?D[n][r]:v),eventHandlers:{click:function(n){e.setCurrent(t)},mouseover:function(e){}},children:Object(k.jsxs)(p.a,{children:[Object(k.jsx)("h4",{children:t[d]}),Object(k.jsx)("p",{children:t[g]})]})},t[d]);var n,r}))}),Object(k.jsx)(C,{})]})})}var M=n(30),A=(n(120),n(182)),R=n(183),I="https://photon.komoot.io/api/?q=",T=null;function z(e){return e.map((function(e){return{label:e.properties.name,feature:e}}))}function E(e){var t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)([]),s=Object(c.a)(o,2),p=s[0],l=s[1],j=Object(r.useContext)(P).map;function d(e){e&&j.flyTo([e.geometry.coordinates[1],e.geometry.coordinates[0]],13)}return Object(r.useEffect)((function(){"string"===typeof a&&a.length>0?(T&&T.abort(),T=new AbortController,fetch("".concat(I).concat(a),{signal:T.signal}).then((function(e){return e.json()})).then((function(e){e&&Array.isArray(e.features)&&l(e.features)}))):l([])}),[a]),Object(k.jsxs)("div",{id:"HomeFilters",children:[Object(k.jsx)("h2",{children:"Recherche de spots"}),Object(k.jsx)(A.a,{disablePortal:!0,freeSolo:!0,id:"combo-box-demo",options:z(p),sx:{width:300},renderInput:function(e){return Object(k.jsx)(R.a,Object(M.a)(Object(M.a)({},e),{},{label:"Recherche par lieu",onKeyPress:function(e){"Enter"===e.key&&p.length>0&&d(p[0])}}))},inputValue:a,onInputChange:function(e,t){return i(t)},onChange:function(e,t){t&&d(t.feature)}})]})}var H=n(186);function F(e){var t=e.toDisplay,n=e.removeCurrent;return Object(k.jsxs)("div",{id:"SpotInfo",children:[Object(k.jsx)("h1",{children:t[d]}),t[f]&&Object(k.jsx)("p",{children:t[f]}),Object(k.jsx)(H.a,{variant:"contained",onClick:n,children:"Close"})]})}var U={container:{}};function Z(e){return e.toDisplay?Object(k.jsx)("div",{id:"FInfo",style:U.container,children:Object(k.jsx)(F,Object(M.a)({},e))}):Object(k.jsx)("div",{id:"FInfo",style:U.container,children:Object(k.jsx)(E,{})})}n(131);var q={app:{}};function B(){return Object(k.jsxs)("div",{id:"Header",children:[Object(k.jsxs)("a",{id:"Logo",href:"self",children:[Object(k.jsx)("img",{src:"images/MapingoLogoTemp.png",alt:"logo"}),Object(k.jsx)("p",{children:"Mapingo"})]}),Object(k.jsx)("div",{id:"MainMenu",children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsx)("a",{href:"",children:"Les activit\xe9s"})}),Object(k.jsx)("li",{children:Object(k.jsx)("a",{href:"",children:"Proposer un spot"})}),Object(k.jsx)("li",{children:Object(k.jsx)("a",{href:"",children:"A propos"})})]})})]})}function J(e){var t=Object(r.useState)(),n=Object(c.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(),s=Object(c.a)(o,2),p=s[0],l=s[1];return Object(r.useEffect)((function(){fetch("https://opensheet.elk.sh/147i98z2i9wcX2q06vLwOB5lfv_IkltVUgw3SvXH9Y6g/Mapingo+Sport+Data").then((function(e){return e.json()})).then(i)}),[]),a&&Object(k.jsxs)("div",{style:q.app,children:[Object(k.jsx)(B,{}),Object(k.jsxs)("div",{id:"Main",children:[Object(k.jsx)(_,{data:a,setCurrent:l}),Object(k.jsx)(Z,{toDisplay:p,removeCurrent:function(){return l(null)}})]})]})}var V=document.getElementById("root");Object(a.createRoot)(V).render(Object(k.jsx)(r.StrictMode,{children:Object(k.jsx)(y,{children:Object(k.jsx)(J,{})})}))}},[[132,1,2]]]);
//# sourceMappingURL=main.95ad84b9.chunk.js.map